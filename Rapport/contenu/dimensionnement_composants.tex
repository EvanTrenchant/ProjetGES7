\chapter{Dimensionnement des asservissements}

Après avoir validé la structure de contrôle avec des régulateurs PI idéaux en simulation, il est nécessaire de passer à l'étape de réalisation pratique. Cette phase consiste à traduire les fonctions de transfert théoriques en circuits électroniques réels à base d'amplificateurs opérationnels (AOP). 

Le dimensionnement des asservissements constitue une étape cruciale du projet, car elle établit le lien entre la théorie et la mise en œuvre physique. Chaque bloc de la chaîne de commande doit être soigneusement dimensionné afin de garantir que les performances obtenues en simulation soient effectivement reproduites sur le système réel. Dans ce chapitre, nous détaillons le dimensionnement de chacun des éléments constitutifs de la boucle d'asservissement, en commençant par les circuits soustracteurs, puis en abordant les correcteurs PI pour les boucles de courant et de vitesse.

\section{Réalisation des soustracteurs}

\noindent
\begin{minipage}[t]{0.48\textwidth}
\vspace{0pt}
Pour commencer nous réalisons un montage soustracteur permettant de comparer la sortie du montage a la commande. 

On utilise alors ce montage a AOP qui permet, en choisissant les mêmes valeurs de résistances, d'obtenir un soustracteur simple:

\begin{equation*}
    V_{S} = V_2 - V_1
\end{equation*}

\vspace{0.5cm}
On choisit des résistances de $10k\Omega$ pour la réalisation pratique.
\end{minipage}
\hfill
\begin{minipage}[t]{0.48\textwidth}
\vspace{-80pt}
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{images/Choix_des_composants/Soustracteur.png}
    \caption{Montage soustracteur à AOP}
    \label{fig:soustracteur_aop}
\end{figure}
\end{minipage}


\section{Dimensionnement des correcteurs réels}

\subsection{Structure du correcteur PI}
La structure du correcteur PI à implémenter est représentée à la figure \ref{fig:schema_pi_aop}.

\begin{figure}[H]
    \centering
    \begin{circuitikz}[european resistors, scale=1.1, transform shape]
        % Premier étage - Correcteur H1(s)
        % Résistance d'entrée R connectée à l'entrée - de l'AOP1
        \draw (0,0) to[R, l=$R$, o-] (2,0);
        
        % Premier AOP (borne - en haut)
        \draw (2,0) node[op amp, anchor=-](OA1){};
        
        % Résistance et condensateur EN SÉRIE dans la rétroaction
        \draw (OA1.-) |- ++(0,1.2) coordinate(top1);
        \draw (top1) to[R, l=$R$] ++(1.5,0) coordinate(midRC);
        \draw (midRC) to[C, l=$C$] ++(1.5,0) coordinate(endRC);
        \draw (endRC) |- (OA1.out);
        
        % Masse sur l'entrée +
        \draw (OA1.+) -- ++(0,-0.4) node[ground]{};
        
        % Sortie du premier étage avec noeud Va aligné
        \draw (OA1.out) to[short, -*] ++(0.63,0) coordinate(va);
        \draw (va) node[below=2mm]{$V_a$};
        
        % Deuxième étage - Correcteur H2(s)
        % Résistance R1 reliée sur la borne - de l'AOP2
        \draw (va) to[R, l=$R1$] ++(2,0) coordinate(beforeAOP2);
        
        % Second AOP (borne - en haut)
        \draw (beforeAOP2) node[op amp, anchor=-](OA2){};
        
        % Résistance R2 dans la rétroaction
        \draw (OA2.-) |- ++(0,1.2) coordinate(top2);
        \draw (top2) to[R, l=$R2$] ++(2.5,0) coordinate(top2end);
        \draw (top2end) |- (OA2.out);
        
        % Masse sur l'entrée +
        \draw (OA2.+) -- ++(0,-0.4) node[ground]{};
        
        % Sortie finale
        \draw (OA2.out) to[short, -o] ++(0.8,0);
        \draw (OA2.out) ++(0.8,0) node[right]{$V_s$};
        
        % Tension d'entrée
        \draw (0,0) node[left]{$V_e$};
        
    \end{circuitikz}
    \caption{Schéma d'un correcteur PI avec des amplificateurs opérationnels}
    \label{fig:schema_pi_aop}
\end{figure}

\subsection{Calcul de la fonction de transfert globale}

La fonction de transfert globale du système s'exprime comme suit : 
\begin{equation*} 
    H(s) = \frac{V_s(s)}{V_e(s)} = \frac{V_a(s)}{V_e(s)} \cdot \frac{V_s(s)}{V_a(s)} = H_1(s) \cdot H_2(s) 
\end{equation*}

Dans cette configuration, on suppose que les amplificateurs opérationnels sont idéaux, ce qui implique $\varepsilon = 0 \Longrightarrow V^+ = V^-$. Le dimensionnement des correcteurs s'effectue en séparant les deux fonctions de transfert.

\subsection{Dimensionnement du correcteur $H_1(s)$}

Pour le premier étage du correcteur, on introduit une impédance équivalente :
\begin{equation*}
    Z_{eq}(s) = R + \frac{1}{C \cdot s} = \frac{RC \cdot s + 1}{sC}
\end{equation*}

En appliquant le théorème de Millman à l'entrée négative du premier AOP, on obtient :
\begin{equation*}
    V^- = \frac{\frac{V_e}{R} + \frac{V_a}{Z_{eq}(s)}}{\frac{1}{R} + \frac{1}{Z_{eq}(s)}}
\end{equation*}

Puisque $V^- = 0V$, le numérateur doit être nul. On a donc :

\begin{equation*}
    \frac{V_e}{R} + \frac{V_a}{Z_{eq}(s)} = 0
\end{equation*}
En réarrangeant, on obtient :
$$\frac{V_a}{Z_{eq}(s)} = - \frac{V_e}{R}$$
$$V_a = - \frac{Z_{eq}(s)}{R} V_e$$
Et donc :
$$H_1(s) = \frac{V_a(s)}{V_e(s)} = - \frac{Z_{eq}(s)}{R} = - \frac{\frac{RC \cdot s+1}{C \cdot s}}{R} = - \frac{RC \cdot s +1}{RC \cdot s}$$

\subsection{Dimensionnement du correcteur $H_2(s)$}

On applique le théorème de Millman au nœud $V^-$ du second AOP :
\begin{equation*}
    V^- = \frac{\frac{V_a(s)}{R_1} + \frac{V_s(s)}{R_2}}{\frac{1}{R_1} + \frac{1}{R_2}}
\end{equation*}
Puisque $V^- = 0V$ (masse virtuelle), le numérateur doit être nul :
\begin{equation*}
    \frac{V_a(s)}{R_1} + \frac{V_s(s)}{R_2} = 0
\end{equation*}
On isole $V_s(s)$ pour trouver la fonction de transfert :
\begin{equation*}
    \frac{V_s(s)}{R_2} = - \frac{V_a(s)}{R_1} \Longrightarrow V_s(s) = - V_a(s) \cdot \frac{R_2}{R_1}
\end{equation*}
La fonction de transfert du second étage s'exprime alors par :
\begin{equation*}
    H_2(s) = \frac{V_s(s)}{V_a(s)} = - \frac{R_2}{R_1}
\end{equation*}

\subsection{Fonction de transfert globale et identification}
On calcule la fonction de transfert globale $H(s)$ en multipliant $H_1(s)$ et $H_2(s)$ :
\begin{equation*}
    H(s) = H_1(s) \cdot H_2(s) = \left( - \frac{RC \cdot s + 1}{RC \cdot s} \right) \cdot \left( - \frac{R_2}{R_1} \right)
\end{equation*}
Les deux signes négatifs s'annulent. On réarrange les termes :
\begin{equation*}
    H(s) = \frac{R_2}{R_1} \cdot \left( \frac{RC \cdot s + 1}{RC \cdot s} \right)
\end{equation*}
On sépare la fraction pour faire apparaître la forme canonique :
\begin{equation*}
    H(s) = \frac{R_2}{R_1} \cdot \left( \frac{RC \cdot s}{RC \cdot s} + \frac{1}{RC \cdot s} \right) = \frac{R_2}{R_1} \left( 1 + \frac{1}{RC \cdot s} \right)
\end{equation*}
La forme de Laplace standard (ou canonique) pour un correcteur PI est :
\begin{equation*}
    H_{PI}(s) = K_p \left( 1 + \frac{1}{T_i s} \right)
\end{equation*}

\subsection{Identification des paramètres}

Par identification directe avec la structure PI souhaitée, on obtient les relations suivantes :

\begin{tcolorbox}[colback=conclusioncolor!5!white, colframe=conclusioncolor!75!black, boxrule=0.5pt, arc=2mm]
\begin{align*}
    K_{p} &= \dfrac{R_2}{R_1} \\
    T_i &= RC
\end{align*}
\end{tcolorbox}


\subsection{Choix des composants}

À partir des paramètres théoriques des correcteurs PI déterminés précédemment, nous procédons à l'identification des composants passifs normalisés (résistances et condensateurs) dont les valeurs commerciales permettent d'approcher au mieux les caractéristiques désirées. Les résultats de cette identification sont présentés ci-après :

\vspace{0.5cm}

\textbf{Correcteur PI pour l'asservissement en courant :}

Les paramètres du correcteur sont : $K_p = 5{,}053$ et $T_i = K_p / K_i = 1{,}39 \times 10^{-4}$ s.

Par identification avec les relations $K_p = R_2/R_1$ et $T_i = RC$, nous obtenons :
\begin{equation*}
    R \cdot C = 10 \times 10 \times 10^{-6} = 1 \times 10^{-4} \approx T_i \quad \text{et} \quad \frac{R_2}{R_1} = \frac{8{,}2 \times 10^3}{1{,}5 \times 10^3} = 5{,}467 \approx K_p
\end{equation*}

\begin{center}
\begin{tabular}{ll}
    \toprule
    Composant & Valeur \\
    \midrule
    $R$ & $10\,\Omega$ \\
    $C$ & $10\,\mu\text{F}$ \\
    $R_1$ & $1{,}5\,\text{k}\Omega$ \\
    $R_2$ & $8{,}2\,\text{k}\Omega$ \\
    \bottomrule
\end{tabular}
\end{center}

\vspace{0.5cm}

\textbf{Correcteur PI pour l'asservissement en vitesse :}

Les paramètres du correcteur sont : $K_p = 6{,}8$ et $T_i = K_p / K_i = 13{,}45$ ms.

Par identification avec les relations $K_p = R_2/R_1$ et $T_i = RC$, nous obtenons :
\begin{equation*}
    R \cdot C = 3{,}3 \times 10^3 \times 3{,}9 \times 10^{-6} = 0{,}0129 \approx T_i \quad \text{et} \quad \frac{R_2}{R_1} = \frac{6{,}8 \times 10^3}{1 \times 10^3} = 6{,}8 \approx K_p
\end{equation*}

\begin{center}
\begin{tabular}{ll}
    \toprule
    Composant & Valeur \\
    \midrule
    $R$ & $3{,}3\,\text{k}\Omega$ \\
    $C$ & $3{,}9\,\mu\text{F}$ \\
    $R_1$ & $1\,\text{k}\Omega$ \\
    $R_2$ & $6{,}8\,\text{k}\Omega$ \\
    \bottomrule
\end{tabular}
\end{center}

\section{Dimensionnement des autres composants de la chaîne d'asservissement}

Après avoir dimensionné les correcteurs PI et les soustracteurs, il est nécessaire de compléter la chaîne d'asservissement avec les autres éléments essentiels : le limiteur de tension (écrêteur) pour protéger le système, et les capteurs de vitesse (dynamo tachymétrique et codeur incrémental) qui nécessitent des circuits de conditionnement pour adapter leurs signaux.

\subsection{Limiteur de tension (écrêteur)}

\noindent
\begin{minipage}[t]{0.48\textwidth}
\vspace{0pt}
Pour réaliser le limiteur de tension que nous avions mis en place en simulation, nous utilisons un montage écrêteur à diodes et ponts diviseurs de tension.

\subsubsection{Principe de fonctionnement}

Si on étudie uniquement la partie supérieure de ce montage, on remarque qu'il se comporte comme un redresseur à simple alternance. En effet, si la tension d'entrée du signal dépasse la somme de la tension de conduction de la diode et de la tension en sortie du pont diviseur de tension, alors la diode conduit. Soit :
\begin{equation*}
\begin{aligned}
V_e &> V_{s+} = V_D + V_P \\
    &= 0{,}6 + 15 \times \frac{18\text{k}}{1\text{k}+18\text{k}} \\
    &\approx 14{,}8\ \text{V}
\end{aligned}
\end{equation*}
\end{minipage}
\hfill
\begin{minipage}[t]{0.48\textwidth}
\vspace{-60pt}
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{images/Choix_des_composants/Limiteur.png}
    \caption{\footnotesize{Montage limiteur de tension à diodes}}
    \label{fig:limiteur_tension}
\end{figure}
\end{minipage}

\vspace{0.5cm}

Dans ces conditions, la diode conduit et limite la tension de sortie du montage à 14,8 V. C'est donc en changeant les valeurs des résistances du pont diviseur de tension que l'on obtient notre tension de seuil positive.
La partie basse du montage effectue la même fonction mais en créant une limite basse que l'on fixe également avec le pont diviseur de tension. Dans notre cas, cette tension de seuil est de :
\begin{equation*}
V_{s-} = -0{,}6 + 15 \times \frac{1\text{k}}{1\text{k}+18\text{k}} \approx 0{,}19 \text{ V}
\end{equation*}

Pour respecter le limiteur que l'on avait mis en simulation qui limitait la tension entre 0,2 V et 14,8 V.

L'amplificateur opérationnel en sortie du montage est simplement un suiveur qui joue le rôle d'adaptateur d'impédance.
Le résultat final est donc un signal limité entre 0,2 V et 14,8 V comme le montre la figure ci-dessous.

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{images/Choix_des_composants/Courbe_Tension_De_Commande_Limité_a_Echelon.png}
    \caption{visualisation de la tension de commande limitée sur PSIM}
    \label{fig:courbe_tension_limitee}
\end{figure}


\subsection{Capteur dynamo tachymétrique}

La dynamo tachymétrique est un capteur analogique qui convertit directement la vitesse de rotation en une tension proportionnelle. Ce composant nécessite un conditionnement de signal pour adapter sa sortie aux niveaux requis par notre système d'asservissement.

\subsubsection{Caractéristiques du capteur}

Le capteur dynamo tachymétrique utilisé possède une constante de conversion $K_{\text{tachy}} = 6 \times 10^{-3}$ V/(rad/s). Cette valeur indique la tension générée par le capteur pour une vitesse de rotation donnée.

\subsubsection{Conditionnement du signal}

Sur PSIM, nous modélisons le capteur en appliquant le facteur $6/1000$ à la vitesse mesurée pour représenter la dynamo tachymétrique réelle. Pour adapter la tension de sortie aux niveaux requis par le système, nous ajoutons un pont diviseur de tension qui divise par deux la tension de sortie.

\begin{figure}[H]
    \centering
    \includegraphics[width=1\textwidth]{images/Choix_des_composants/Tachy/Schéma_PSIM_Choix_Des_Composants_Tachy.png}
    \caption{Schéma de modélisation du capteur tachymétrique sur PSIM}
    \label{fig:schema_tachy}
\end{figure}
\figref{Figure \ref{fig:schema_tachy}}{Modélisation\_Intermédiaire\_VALIDE/06\_Choix\_Des\_Composants/Tachy/Choix\_composants\_Tachy\_VALIDE\_08\_11\_25.psimsch}

\begin{figure}[H]
    \centering
    \includegraphics[width=1\textwidth]{images/Choix_des_composants/Tachy/Coubre_Comparaison_Choix_des_Composants_Tachy_08_11_2025.png}
    \caption{Comparaison entre Simulink et PSIM pour le capteur tachymétrique et les choix de composants}
    \label{fig:comparaison_tachy}
\end{figure}
\figref{Figure \ref{fig:comparaison_tachy}}{Modélisation\_Intermédiaire\_VALIDE/06\_Choix\_Des\_Composants/Tachy/Comparaison\_Composants\_Tachy\_VALIDE\_08\_11\_2025.m}

La figure \ref{fig:comparaison_tachy} illustre la comparaison entre les modélisations Simulink avec correcteurs PI idéaux et PSIM avec composants réels (résistances et condensateurs). On observe une excellente concordance entre les deux courbes, confirmant que les choix de composants permettent de reproduire les performances théoriques. Les performances dynamiques restent conformes aux spécifications, démontrant que le passage aux composants réels n'altère pas significativement le comportement de l'asservissement.


\subsection{Codeur incrémental}

\subsubsection{Caractéristiques du codeur}

Le codeur incrémental utilisé possède les caractéristiques suivantes :
\begin{itemize}
    \item Nombre d'impulsions par tour : 1000
    \item Résolution : 0,36° par impulsion
\end{itemize}
\newpage
\begin{figure}[H]
    \centering
    \includegraphics[width=1\textwidth]{images/Choix_des_composants/Codeur_Incrémental/Schéma_PSIM_Codeur_Incremental_Seul.png}
    \caption{Schéma de modélisation du codeur incrémental sur PSIM}
    \label{fig:schema_codeur_incremental}
\end{figure}
\figref{Figure \ref{fig:schema_codeur_incremental}}{Modélisation\_Intermédiaire\_VALIDE/06\_Choix\_Des\_Composants/Codeur/Choix\_Composants\_Codeur\_Incremental\_VALIDE\_08\_11\_25.psimsch}

\subsubsection{Circuit de conversion impulsions/tension}

Pour utiliser le codeur incrémental dans notre système d'asservissement analogique, il est nécessaire de convertir les impulsions numériques en une tension analogique proportionnelle à la vitesse. Cette conversion peut être réalisée par un circuit fréquence-tension (convertisseur F/V).


Le schéma complet de l'asservissement en vitesse avec codeur incrémental devient ainsi :

\begin{figure}[H]
    \centering
    \includegraphics[width=1\textwidth]{images/Choix_des_composants/Codeur_Incrémental/Schéma_PSIM_Codeur_Incremental_Complet.png}
    \caption{Schéma complet de l'asservissement en vitesse avec codeur incrémental}
    \label{fig:schemame_asservissement_vitesse_codeur_incremental}
\end{figure}
\figref{Figure \ref{fig:schemame_asservissement_vitesse_codeur_incremental}}{Modélisation\_Intermédiaire\_VALIDE/06\_Choix\_Des\_Composants/Codeur/Choix\_Composants\_Codeur\_Incremental\_VALIDE\_08\_11\_25.psimsch}
\newpage
\begin{figure}[H]
    \centering
    \includegraphics[width=1\textwidth]{images/Choix_des_composants/Codeur_Incrémental/Coubre_Comparaison_Choix_des_Composants_Codeur_Incremental_08_11_2025.png}
    \caption{Comparaison entre Simulink et PSIM pour le codeur incrémental et les choix de composants}
    \label{fig:comparaison_codeur_incremental}
\end{figure}
\figref{Figure \ref{fig:comparaison_codeur_incremental}}{Modélisation\_Intermédiaire\_VALIDE/06\_Choix\_Des\_Composants/Codeur/Comparaison\_Composants\_Codeur\_Incremental\_VALIDE\_08\_11\_25.m}

La figure \ref{fig:comparaison_codeur_incremental} illustre la comparaison entre les modélisations Simulink avec correcteurs PI idéaux et PSIM avec composants réels (résistances et condensateurs). On observe une bonne concordance entre les deux courbes, confirmant que les choix de composants permettent de reproduire les performances théoriques. Les oscillations caractéristiques du codeur incrémental sont présentes sur la simulation PSIM, validant la cohérence de la modélisation du capteur numérique. Les performances dynamiques restent conformes aux spécifications, démontrant que le passage aux composants réels n'altère pas significativement le comportement de l'asservissement.